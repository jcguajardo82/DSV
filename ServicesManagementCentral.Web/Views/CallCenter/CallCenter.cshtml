@using System.Data;
@{
    ViewBag.Title = "Call Center";


}


@*<div class="row">
        <div class="col-xs-5 col-md-5 col-lg-5">
            <div class="ibox">
                <div class="ibox-title">
                    Sucursales
                    <div class="ibox-tools">
                        <a class="collapse-link">
                            <i class="fa fa-chevron-up"></i>
                        </a>
                    </div>
                </div>
                <div class="ibox-content">
                    <table style="width:100%;">
                        <tr>
                            <td>
                                <select class="form-control" id="cmbServicio" name="cmbServicio">
                                    <option selected="selected" value="0">--Elegir Servicio--</option>
                                    <option value="1">Cancelacion</option>
                                    <option value="2">Retorno</option>

                                </select>
                            </td>
                            <td><input class="form-control" type="number" min="1" max="99999" placeholder="Código Postal" value="" id="txtCp"></td>
                            <td>
                                <button type="button" id="btnTienda" class="btn btn-primary" onclick="cargaTdas();">
                                    Tienda
                                </button>
                            </td>
                        </tr>
                        <tr>

                            <td colspan="3">
                                <select class="form-control" id="cmbTda" name="cmbTda">
                                </select>
                            </td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>
        <div class="col-xs-7 col-md-7 col-lg-7">
            <div class="ibox">
                <div class="ibox-title">
                    Buscador  <div class="ibox-tools">
                        <a class="collapse-link">
                            <i class="fa fa-chevron-up"></i>
                        </a>
                    </div>
                </div>
                <div class="ibox-content">
                    <table style="width:100%;">
                        <tr>
                            <td>
                                <input class="form-control" type="text" placeholder="Producto" value="" id="txtProdArt">
                            </td>
                            <td style="text-align:center;">
                                <button type="button" id="btnBuscar" class="btn btn-primary" onclick="CargaProducto()">
                                    Buscar
                                </button>
                            </td>
                            <td>
                                <button type="button" id="btnHistoria" class="btn btn-primary" onclick="clickLogin()">
                                    Historia
                                </button>
                            </td>
                        </tr>

                    </table>
                </div>
            </div>

        </div>
    </div>*@
<div class="row">
    @*<div class="col-xs-10 col-md-10 col-lg-10">
            <table id="tblBusquedaArt" class="table table-striped table-bordered table-hover">
                <thead class="bg-primary">
                    <tr role="row">
                        <th class="text-center sorting" tabindex="0" rowspan="1" colspan="1" style="width: 118px;">Código</th>
                        <th class="text-center sorting" tabindex="0" rowspan="1" colspan="1">Descripción</th>
                        <th class="text-center sorting" tabindex="0" rowspan="1" colspan="1" style="width: 116px;">Marca</th>
                        <th class="text-center sorting" tabindex="0" rowspan="1" colspan="1" style="width: 126px;">Precio</th>
                        <th class="text-center sorting" tabindex="0" rowspan="1" colspan="1" style="width: 124px;">Normal</th>
                        <th class="text-center sorting" tabindex="0" rowspan="1" colspan="1" style="width: 120px;">Dscto</th>
                    </tr>
                </thead>
            </table>
        </div>*@
    @*<div class="col-xs-2 col-md-2 col-lg-2">
            <img id="imgProduct" src="~/Content/images/theme/default_image_01.png" class="img-lg">
        </div>*@
    <div class="col-xs-2 col-md-2 col-lg-2">
      
        <div class="form-group">

            @*<label>Tiena</label>*@
            <select class="form-control m-b" id="ddlTdas">
                @{
                    DataSet ds = (DataSet)ViewBag.tdas;


                    foreach (DataRow item in ds.Tables[0].Rows)
                    {

                        if (Session["Id_Num_UN"] != null)
                        {
                            if (@item["id_num_un"].ToString() == Session["Id_Num_UN"].ToString())
                            {
                                <option value="@item["id_num_un"]" selected>@item["Centros"]"</option>
                            }
                            else
                            {
                                <option value="@item["id_num_un"]">@item["Centros"]"</option>
}
                        }

                    }
                }

            </select>
        </div>
    </div>
    <div class="col-xs-8 col-md-8 col-lg-8">

    </div>
    <div class="col-xs-2 col-md-2 col-lg-2">
        <div class="text-right">
            <button type="button" class="btn btn-primary" onclick="popBuscador();">Buscador de Productos</button>
        </div>
    </div>
</div>
<div class="row" style="padding-bottom:50px;">
    <div class="col-xs-12 col-md-12 col-lg-12">
        <div class="ibox ">
            <div class="ibox-content">
                <div id="wizard">
                    <h3>Seleccionar Cliente</h3>
                    <section>
                        <div class="row" id="divVerificaCliente">
                            <div class="col-xs-12 col-md-12 col-lg-12">
                                <div class="text-right">
                                    <button type="button" class="btn btn-primary" onclick="popBuscarClient();">Buscar Cliente</button>
                                    <button type="button" class="btn btn-primary" onclick="popAddClient();">Nuevo Cliente</button>
                                </div>
                                <p>
                                    <b>Identificación del Cliente<br />Solicite al cliente cualquiera de los siguientes datos:</b>
                                    <ul>
                                        <li>Direccion de Correo Electronico</li>
                                        <li>Número Telefonico(Capture sin Guiones)</li>
                                        <li>Si el Cliente no ha sido registrado con anterioridad debera darlo de alta</li>
                                    </ul>
                                </p>
                                <div class="input-group">
                                    <input type="text" id="txtVerificaC" placeholder="CARACTERES VALIDOS:letras,números,arroba(&#64;),guión medio(-) y bajo(_)" class="form-control"> <span class="input-group-append">
                                        <button type="button" class="btn btn-primary" onclick="VerificaCliente()">
                                            Verificar
                                        </button>
                                    </span>
                                </div>
                                <hr />
                            </div>
                        </div>

                        <div class="row" id="divResultClient" style="display:none;">
                            <div class="col-xs-4 col-md-4 col-lg-4"></div>
                            <div class="col-xs-4 col-md-4 col-lg-4">
                                <input type="hidden" id="hddIdCliente" />
                                <table style="width:100%" class="table table-warning">
                                    <tr>
                                        <td>Nombre:</td>
                                        <td><b id="lblNombreCte"></b></td>
                                    </tr>
                                    <tr>
                                        <td>Folio del Cliente:</td>
                                        <td>
                                            <p id="lblFolioCte"></p>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>Clave:</td>
                                        <td>
                                            <p id="lblClaveCte"></p>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>Dirección:</td>
                                        <td>
                                            <p id="lblCalleCte"></p>
                                            <p id="lblColoniaCte"></p>
                                            <p id="lblEdoCte"></p>
                                            <p id="lblCpCte"></p>


                                        </td>
                                    </tr>
                                    <tr>
                                        <td>Teléfono:</td>
                                        <td><p id="lblTelefonoCte"></p></td>
                                    </tr>
                                </table>
                            </div>
                            <div class="col-xs-4 col-md-4 col-lg-4">
                                <button type="button" class="btn btn-default btn btn-xs" onclick="NuevaBusqueda()">
                                    Nueva Busqueda
                                </button>
                            </div>
                        </div>
                    </section>
                    <h3>Fecha de Entrega</h3>
                    <section>
                        <p><b>*Recuerda al cliente que nuestro horario de entrega es de 8:00 am a 10:00 pm de lunes a domingo, seleciona el dia y hora que indique el cliente </b></p>
                        <div class="row">
                            <div class="col col-xs-12 col-md-12">
                                <div class="form-group">
                                    <label>Día</label>
                                    <select class="form-control m-b" id="ddlDias" onchange="onchangeDias()">
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col col-xs-12 col-md-12">
                                <div class="form-group">
                                    <label>Entre</label>
                                    <select class="form-control m-b" id="ddlHoras">
                                    </select>
                                </div>
                            </div>
                        </div>
                    </section>
                    <h3>Carrito de Compras</h3>
                    <section>
                        @*<input id="flagCarrito" name="flagCarrito" value="1" style="visibility:hidden" />*@
                        <div class="row">
                            <div class="col-10"></div>
                            <div class="col-2">
                                @*<button type="button" onclick="seleccionarProducto()" class="btn btn-xs btn-danger btn-circle"><i class="fa fa-plus"></i></button>*@
                                <button type="button" class="btn btn-primary" onclick="seleccionarProducto();">Agregar Articulo</button>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-12 col-md-12 col-lg-12">
                                <table id="tblPoductosSeleccionados" class="table table-striped table-bordered table-hover" style="width:100%;">
                                    <thead class="bg-warning">
                                        <tr role="row">

                                            <th class="text-center sorting" tabindex="0" rowspan="1" colspan="1">Descripción</th>
                                            <th class="text-center sorting" tabindex="0" rowspan="1" colspan="1" style="width:10%;">Precio Normal</th>
                                            <th class="text-center sorting" tabindex="0" rowspan="1" colspan="1" style="width:10%;">Precio Oferta</th>
                                            <th class="text-center sorting" tabindex="0" rowspan="1" colspan="1" style="width:20%;">Cantidad</th>
                                            <th class="text-center sorting" tabindex="0" rowspan="1" colspan="1" style="width:15%;">Total</th>
                                            <th class="text-center sorting" tabindex="0" rowspan="1" colspan="1" style="width:10%;">Borrar</th>
                                        </tr>
                                    </thead>
                                    <tbody id="feedback2">
                                        @*<tr>
                                                <td>123124<br /><input type="text" placeholder="Indicaciones y Observaciones" class="form-control input-sm" /></td>
                                                <td>$12.22</td>
                                                <td>$12.22</td>
                                                <td><input type="text" style="width:50px;" /> pza</td>
                                                <td>2</td>
                                                <td><input type="checkbox" class="checkbox" /></td>
                                            </tr>
                                            <tr>
                                                <td>123124<br /><input type="text" placeholder="Indicaciones y Observaciones" class="form-control input-sm" /></td>
                                                <td>$12.22</td>
                                                <td>$12.22</td>
                                                <td><input type="text" style="width:50px;" /> pza</td>
                                                <td>2</td>
                                                <td><input type="checkbox" class="checkbox" /></td>
                                            </tr>*@
                                    </tbody>
                                </table>
                            </div>
                            <div class="col-sm-12 col-md-12 col-lg-12">
                                <strong>  <label style="font-size:17px" id="lblCantidad"></label></strong>
                            </div>
                            <div class="col-sm-12 col-md-12 col-lg-12">
                                <strong> <label style="font-size:17px" id="lblTotal"></label> </strong>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-12 col-md-12 col-lg-12">
                                <table id="tblBusquedaArt" class="table table-striped table-bordered table-hover" style="width:100%;">
                                    <thead class="bg-warning">
                                        <tr role="row">
                                            <th class="text-center sorting" tabindex="0" rowspan="1" colspan="2">Observaciones e instrucciones generales</th>

                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>1 . Favor de llamar por telefono antes de entregar</td>
                                            <td>
                                                <button type="button" style="visibility:visible;" class="btn btn-xs btn-danger btn-circle"><i class="fa fa-close"></i></button>
                                            </td>
                                        </tr>
                                    </tbody>
                                    <tfoot>
                                        <tr>
                                            <td><input type="text" class="form-control input-sm" /></td>
                                            <td>
                                                <button type="button" id="btnHistoria" class="btn btn-primary" onclick="clickLogin()">
                                                    Agregar Observaciones
                                                </button>
                                            </td>
                                        </tr>
                                    </tfoot>
                                </table>
                            </div>
                        </div>
                    </section>
                    <h3>Metodo de  Entrega</h3>
                    <section>
                        <div class="row">
                            <div class="col-xs-12 col-md-12 col-lg-12">
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="rdoMetodoEntrega" id="rdoTda" value="1">
                                    <label class="form-check-label" for="flexRadioDefault1">
                                        ENTREGA EN TIENDA (Si el cliente elige acudir por su pedido selecciona esta opción)
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="rdoMetodoEntrega" id="rdoDomicilio" value="2">
                                    <label class="form-check-label" for="flexRadioDefault2">
                                        ENTREGA A DOMICILIO (Confirma la Dirección del cliente o ingresa una nueva)
                                    </label>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-6 col-md-6 col-lg-6">
                                <input type="hidden" id="hddIdDir" />
                                <table>
                                    <tr>
                                        <td>
                                            <b>Nombre de la persona que recibira el pedido</b>
                                            <input type="text" id="rec_name" class="form-control input-sm" required />
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <b>Ciudad</b>
                                            <input type="text" id="rec_ciudad" class="form-control input-sm" />
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <b>Estado</b>
                                            <input type="text" id="rec_estado" class="form-control input-sm" />
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <b>Calle</b>
                                            <input type="text" id="rec_calle" class="form-control input-sm" />
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <b>Número</b>
                                            <input type="text" id="rec_num" class="form-control input-sm" />
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <b>Número Interior(si aplica)</b>
                                            <input type="text" id="rec_nunInt" class="form-control input-sm" />
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <b>Colonia</b>
                                            <input type="text" id="rec_col" class="form-control input-sm" />
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <b>Código Postal</b>
                                            <input type="number" min="1" max="99999" id="rec_CP" class="form-control input-sm" />
                                        </td>
                                    </tr>
                                </table>
                            </div>
                            <div class="col-xs-6 col-md-6 col-lg-6">
                                <table class="table" id="tblDirecciones">
                                    <tbody>
                                    </tbody>
                                </table>
                                @*<p>
                                        Juan Perex<br />
                                        Villas de Belgica 277<br />
                                        Colonia Roble nuevo<br />
                                        Escobedo<br />
                                        CP: 092890
                                        <br />
                                        <button type="button" class="btn btn-default btn btn-xs" onclick="GetTdasTrasp()">
                                            Utilizar esta direccón
                                        </button>
                                    </p>*@


                            </div>
                        </div>
                    </section>
                    <h3>Forma de Pago</h3>
                    <section>
                        <div class="row">
                            <div class="col-xs-12 col-md-12 col-lg-12">
                                <table id="tblFormaPago" class="table table-striped table-bordered table-hover" style="width:100%;">
                                    <thead class="bg-warning">
                                        <tr role="row">
                                            <th class="text-center sorting" tabindex="0" rowspan="1" colspan="2">Pago Contra Entrega</th>

                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>
                                                <div class="form-check">
                                                    <input class="form-check-input" type="radio" name="rdoMetodoPago" id="rdoEfevo" value="efectivo" checked>
                                                    <label class="form-check-label" for="flexRadioDefault2">
                                                        Efectivo y/o vales de papel de despensa
                                                    </label>
                                                </div>
                                            </td>
                                            <td style="text-align:right;">
                                                Efectivo: <input type="text" id="in_pago" width="100px;" /><br />
                                                Vales:&nbsp;&nbsp;&nbsp;&nbsp; <input type="text" id="in_vales" width="100px;" />
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <div class="form-check">
                                                    <input class="form-check-input" type="radio" name="rdoMetodoPago" id="rdoCdto" value="credito" checked>
                                                    <label class="form-check-label" for="flexRadioDefault2">
                                                        Tarjeta de Credito Terminal Portatil
                                                    </label>
                                                </div>
                                            </td>
                                            <td></td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <div class="form-check">
                                                    <input class="form-check-input" type="radio" name="rdoMetodoPago" id="rdoDebito" value="debito" checked>
                                                    <label class="form-check-label" for="flexRadioDefault2">
                                                        Tarjeta de Debito Terminal Portatil
                                                    </label>
                                                </div>
                                            </td>
                                            <td></td>
                                        </tr>
                                    </tbody>

                                </table>
                            </div>
                        </div>
                    </section>
                    <h3>Resumen</h3>
                    <section>
                        <div class="row">
                            <div class="col-xs-12 col-md-12 col-lg-12">
                                <table id="tblFormaPago" class="table table-striped table-bordered table-hover" style="width:100%;">
                                    <thead class="bg-warning">
                                        <tr role="row">
                                            <th class="text-center sorting">Descripción</th>
                                            <th class="text-center sorting">Cantidad</th>
                                            <th class="text-center sorting">Precio</th>
                                            <th class="text-center sorting">Subtotal</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>
                                                coca cola 500 ml
                                            </td>
                                            <td>
                                                1
                                            </td>
                                            <td>
                                                $10.00
                                            </td>
                                            <td>
                                                $10.00
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                coca cola 500 ml
                                            </td>
                                            <td>
                                                1
                                            </td>
                                            <td>
                                                $10.00
                                            </td>
                                            <td>
                                                $10.00
                                            </td>
                                        </tr>
                                    </tbody>
                                    <tfoot>
                                        <tr>
                                            <td></td>
                                            <td colspan="2"><b>Costo total de la orden</b></td>
                                            <td><b>$20.00</b></td>
                                        </tr>
                                    </tfoot>
                                </table>
                                <table class="table">
                                    <tr>
                                        <td><b>Sera en tregada en:</b></td>
                                        <td>
                                            <p>
                                                Juan Perex<br />
                                                Villas de Belgica 277<br />
                                                Colonia Roble nuevo<br />
                                                Escobedo<br />
                                                CP: 092890
                                            </p>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td><b>Fecha de entrega:</b></td>
                                        <td>2021-07-01 21:00 HRS </td>
                                    </tr>
                                    <tr>
                                        <td><b>Forma de Pago:</b></td>
                                        <td>Tarjeta de Credito / Terminal Portatil </td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                    </section>
                </div>

            </div>
        </div>
    </div>
</div>
<div class="modal fade bd-example-modal-xl" id="popUpSeleccionarProductos" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel2">Búsqueda de Productos</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                @*<div class="row">
                        <div class="col-sm-12 col-md-12 col-lg-12">
                            <table id="tblBusquedaSeleccionar" class="table table-striped table-bordered table-hover">
                                <thead class="bg-danger-sor">
                                    <tr role="row">
                                        <th>Código</th>
                                        <th>Descripción</th>
                                        <th>Marca</th>
                                        <th>Precio</th>
                                        <th>Normal</th>
                                        <th>Dscto</th>
                                        <th></th>
                                        <th>Cantidad</th>
                                            <th name="accion">Acción</th>
                                    </tr>
                                </thead>
                                <tbody id="feedback"></tbody>
                            </table>
                        </div>

                    </div>*@

            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>
                @*<button type="button" class="btn btn-primary" onclick="addProduct2()" data-dismiss="modal">Agregar</button>*@
            </div>
        </div>
    </div>
</div>
<div class="modal fade bd-example-modal-xl" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Búsqueda de Productos</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-sm-12 col-md-12 col-lg-12">
                        <table id="tblBusquedaArt2" class="table table-striped table-bordered table-hover">
                            <thead class="bg-danger-sor">
                                <tr role="row">
                                    <th>Código</th>
                                    <th>Descripción</th>
                                    <th>Marca</th>
                                    <th>Precio</th>
                                    <th>Normal</th>
                                    <th>Dscto</th>
                                    <th></th>
                                    @*<th>Cantidad</th>
                                        <th name="accion">Acción</th>*@
                                </tr>
                            </thead>
                            <tbody id="feedback"></tbody>
                        </table>
                    </div>
                    @*<div class="col-xs-2 col-md-2 col-lg-2">
                            <img id="imgProduct2" src="~/Content/images/theme/default_image_01.png" class="img-lg">
                        </div>*@
                </div>
                @*<div class="row">
                        <div class="col-4">
                            <div class="input-group">
                                <span class="input-group-addon" id="basic-addon2">Cantidad</span>
                                <input type="text" id="Addcantidad" name="Addcantidad" class="form-control" placeholder="Cantidad de producto" aria-describedby="basic-addon2">
                            </div>
                        </div>
                    </div>*@

            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>
                @*<button type="button" class="btn btn-primary" onclick="addProduct2()" data-dismiss="modal">Agregar</button>*@
            </div>
        </div>
    </div>
</div>
<div class="modal fade bd-example-modal-lg" id="dlgBuscadorCliente" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5>Buscador de Clientes</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="row" id="divBuscaCliente">
                    <div class="col-xs-12 col-md-12 col-lg-12">
                        <p>
                            <b>Buscador de Clientes</b><br />Se puede buscar por nombre y apellido paterno y materno.Para buscar por telefono ingrese solo digitos.Para buscar por direccion captura
                            <b>Calle #,Colonia y Ciudad</b> usando comas como separador
                        </p>
                        <div class="input-group">
                            <input type="text" id="txtBuscarCte" placeholder="CARACTERES VALIDOS:letras,números,arroba(&#64;),guión medio(-) y bajo(_)" class="form-control"> <span class="input-group-append">
                                <button type="button" class="btn btn-primary" onclick="BuscarCliente()">
                                    Buscar
                                </button>
                            </span>
                        </div>
                    </div>
                </div>
                <br />
                <div id="divgridClientes" style="display:none" class="col-sm-12 col-md-12 col-lg-12">
                    <table id="tblBusquedaCliente" class="table table-striped table-bordered table-hover">
                        <thead class="bg-danger-sor">
                            <tr role="row">
                                <th>Seleccionar</th>
                                <th>Nombre</th>
                                <th>Email</th>
                                <th>Direccion</th>
                                <th>Telefono</th>

                                @*<th>Cantidad</th>
                                    <th name="accion">Acción</th>*@
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>
                                    <input type="checkbox" id="chkClient" />
                                </td>
                                <td>Juan Perez</td>
                                <td>JuanPerez@b.com</td>
                                <td>Jacarandas #23 Monterrey Nuevo Leon</td>
                                <td>819674755</td>

                            </tr>
                        </tbody>
                    </table>
                </div>
                <div id="divbuttonAddClient" style="display:none" class="col-sm-12 col-md-12 col-lg-12">
                    <p>
                        <b>No se encontraron resultados</b>
                    </p>
                    <button type="button" class="btn btn-primary" onclick="popAddClient();">Nuevo Cliente</button>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>
                <button type="button" class="btn btn-primary" data-dismiss="modal">Seleccionar</button>
            </div>
        </div>
    </div>
</div>
<div class="modal fade bd-example-modal-lg" id="dlgSeleccionar" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content" style="width:900px">
            <div class="modal-header">
                <h5>Agregar Articulo</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body" style="width:900px">
                <div class="row">
                    <div class="col-xs-5 col-md-5 col-lg-5">
                        <div class="ibox">
                            <div class="ibox-title">
                                Sucursales
                                <div class="ibox-tools">
                                    <a class="collapse-link">
                                        <i class="fa fa-chevron-up"></i>
                                    </a>
                                </div>
                            </div>
                            <div class="ibox-content">
                                <table style="width:100%;">
                                    <tr>
                                        @*<td>
                                                <select class="form-control" id="cmbServicio" name="cmbServicio">
                                                    <option selected="selected" value="0">--Elegir Servicio--</option>
                                                    <option value="1">Cancelacion</option>
                                                    <option value="2">Retorno</option>

                                                </select>
                                            </td>*@
                                        <td><input class="form-control" type="number" min="1" max="99999" placeholder="Código Postal" value="" id="txtCp"></td>
                                        <td>
                                            <button type="button" id="btnTienda" class="btn btn-primary" onclick="cargaTdas();">
                                                Tienda
                                            </button>
                                        </td>
                                    </tr>
                                    <tr>

                                        <td colspan="3">
                                            <select class="form-control" id="cmbTda" name="cmbTda">
                                            </select>
                                        </td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                    </div>
                    <div class="col-xs-7 col-md-7 col-lg-7">
                        <div class="ibox">
                            <div class="ibox-title">
                                Buscador  <div class="ibox-tools">
                                    <a class="collapse-link">
                                        <i class="fa fa-chevron-up"></i>
                                    </a>
                                </div>
                            </div>
                            <div class="ibox-content">
                                <table style="width:100%;">
                                    <tr>
                                        <td>
                                            <input class="form-control" type="text" placeholder="Producto" value="" id="txtProdArt2">
                                        </td>
                                        <td style="text-align:center;">
                                            <button type="button" id="btnBuscar" class="btn btn-primary" onclick="CargaSeleccionaProducto()">
                                                Buscar
                                            </button>
                                        </td>
                                        <td>
                                            <button type="button" id="btnHistoria" class="btn btn-primary" onclick="clickLogin()">
                                                Historia
                                            </button>
                                        </td>
                                    </tr>

                                </table>
                            </div>
                        </div>

                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-12 col-md-12 col-lg-12">
                        <table id="tblBusquedaSeleccionar" class="table table-striped table-bordered table-hover">
                            <thead class="bg-danger-sor">
                                <tr role="row">
                                    <th>Código</th>
                                    <th>Descripción</th>
                                    <th>Marca</th>
                                    <th>Precio</th>
                                    <th>Normal</th>
                                    <th>Dscto</th>
                                    <th></th>
                                    <th>Cantidad</th>
                                    <th name="accion">Acción</th>
                                </tr>
                            </thead>
                            <tbody id="feedback"></tbody>
                        </table>
                    </div>

                </div>

            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>
                @*<button type="button" class="btn btn-primary" onclick="AddClient()" data-dismiss="modal">Agregar</button>*@
            </div>
        </div>
    </div>
</div>
<div class="modal fade bd-example-modal-lg" id="dlgBuscador" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5>Alta de Cliente</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-xs-5 col-md-5 col-lg-5">
                        <div class="ibox">
                            <div class="ibox-title">
                                Sucursales
                                <div class="ibox-tools">
                                    <a class="collapse-link">
                                        <i class="fa fa-chevron-up"></i>
                                    </a>
                                </div>
                            </div>
                            <div class="ibox-content">
                                <table style="width:100%;">
                                    <tr>
                                        @*<td>
                                                <select class="form-control" id="cmbServicio" name="cmbServicio">
                                                    <option selected="selected" value="0">--Elegir Servicio--</option>
                                                    <option value="1">Cancelacion</option>
                                                    <option value="2">Retorno</option>

                                                </select>
                                            </td>*@
                                        <td><input class="form-control" type="number" min="1" max="99999" placeholder="Código Postal" value="" id="txtCp"></td>
                                        <td>
                                            <button type="button" id="btnTienda" class="btn btn-primary" onclick="cargaTdas();">
                                                Tienda
                                            </button>
                                        </td>
                                    </tr>
                                    <tr>

                                        <td colspan="3">
                                            <select class="form-control" id="cmbTda" name="cmbTda">
                                            </select>
                                        </td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                    </div>
                    <div class="col-xs-7 col-md-7 col-lg-7">
                        <div class="ibox">
                            <div class="ibox-title">
                                Buscador  <div class="ibox-tools">
                                    <a class="collapse-link">
                                        <i class="fa fa-chevron-up"></i>
                                    </a>
                                </div>
                            </div>
                            <div class="ibox-content">
                                <table style="width:100%;">
                                    <tr>
                                        <td>
                                            <input class="form-control" type="text" placeholder="Producto" value="" id="txtProdArt">
                                        </td>
                                        <td style="text-align:center;">
                                            <button type="button" id="btnBuscar" class="btn btn-primary" onclick="CargaProducto()">
                                                Buscar
                                            </button>
                                        </td>
                                        <td>
                                            <button type="button" id="btnHistoria" class="btn btn-primary" onclick="clickLogin()">
                                                Historia
                                            </button>
                                        </td>
                                    </tr>

                                </table>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>
                @*<button type="button" class="btn btn-primary" onclick="AddClient()" data-dismiss="modal">Agregar</button>*@
            </div>
        </div>
    </div>
</div>
<div class="modal fade bd-example-modal-lg" id="dlgAddClients" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5>Alta de Cliente</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-xs-12 col-md-12 col-lg-12">
                        <div class="alert alert-warning" id="divMsjAddClient">
                            No se encontro ningun resultado para la busqueda. <b>Para dar de alta un nuevo cliente, llenar el siguiente formulario.</b>
                        </div>
                    </div>

                </div>
                <div class="row">
                    <div class="col-xs-6 col-md-6 col-lg-6">
                        <div class="form-group">
                            <label>E-Mail </label>
                            <input type="text" id="txtCteEamil" class="form-control" maxlength="100" />
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-xs-4 col-md-4 col-lg-4">
                        <div class="form-group">
                            <label>Nombre </label>
                            <input type="text" id="txtCteNombre" class="form-control" maxlength="100" />
                        </div>
                    </div>
                    <div class="col-xs-3 col-md-3 col-lg-3">
                        <div class="form-group">
                            <label>Apellido Paterno </label>
                            <input type="text" id="txtCteApPaterno" class="form-control" maxlength="100" />
                        </div>
                    </div>
                    <div class="col-xs-3 col-md-3 col-lg-3">
                        <div class="form-group">
                            <label>Apellido Materno </label>
                            <input type="text" id="txtCteApMaterno" class="form-control" maxlength="100" />
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-xs-3 col-md-3 col-lg-3">
                        <div class="form-group">
                            <label>Alias de la Dirección </label>
                            <input type="text" id="txtCteNomDir" class="form-control" maxlength="100" />
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-xs-2 col-md-2 col-lg-2">
                        <div class="form-group">
                            <label>Código Postal </label>
                            <input type="number" id="txtCteCp" class="form-control" maxlength="5" />
                        </div>
                    </div>
                    <div class="col-xs-5 col-md-3 col-lg-4">
                        <div class="form-group">
                            <label>Estado </label>
                            <select id="ddlCteEstado" class="form-control" disabled></select>
                            @*<input type="text" id="ddlCteEstado" class="form-control" disabled maxlength="100" />*@
                        </div>
                    </div>
                    <div class="col-xs-5 col-md-3 col-lg-4">
                        <div class="form-group">
                            <label>Ciudad </label>
                            <input type="text" id="txtCteCiudad" class="form-control" disabled maxlength="100" />
                        </div>
                    </div>


                </div>
                <div class="row">
                    <div class="col-xs-3 col-md-3 col-lg-3">
                        <div class="form-group">
                            <label>Colónia </label>
                            @*<input type="text" id="txtCteColonia" class="form-control" maxlength="100" />*@
                            <select id="ddlCteColonia" class="form-control">
                            </select>
                        </div>
                    </div>
                    <div class="col-xs-3 col-md-3 col-lg-3">
                        <div class="form-group">
                            <label>Calle </label>
                            <input type="text" id="txtCteCalle" class="form-control" maxlength="100" />
                        </div>
                    </div>
                    <div class="col-xs-3 col-md-3 col-lg-3">
                        <div class="form-group">
                            <label>Número Exterior </label>
                            <input type="text" id="txtCteNumExt" class="form-control" maxlength="100" />
                        </div>
                    </div>
                    <div class="col-xs-3 col-md-3 col-lg-3">
                        <div class="form-group">
                            <label>Número Interior </label>
                            <input type="text" id="txtCteNumInt" class="form-control" maxlength="100" />
                        </div>
                    </div>

                </div>

                <div class="row">
                    <div class="col-xs-3 col-md-3 col-lg-3">
                        <div class="form-group">
                            <label>Teléfono </label>
                            <input type="text" id="txtCteTelefono" class="form-control" maxlength="100" />
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>
                <button type="button" class="btn btn-primary" onclick="AddClient()" data-dismiss="modal">Agregar</button>
            </div>
        </div>
    </div>
</div>
<div class="modal fade bd-example-modal-xl" id="dlgListClients" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5>Busqueda de Cliente</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-sm-12 col-md-12 col-lg-12">
                        <table id="tblConsultaCte" class="display table table-striped table-bordered table-hover table-responsive-md expand dataTable no-footer ">
                            <thead class="bg-danger-sor">
                                <tr>
                                    <th>Nombre</th>
                                    <th>Apellido Paterno</th>
                                    <th>Apellido Materno</th>
                                    <th>Email</th>
                                    <th>Teléfono</th>
                                    <th>Dirección</th>
                                    <th name="accion"></th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>
                    <button type="button" class="btn btn-primary" onclick="AddClient()" data-dismiss="modal">Agregar</button>
                </div>
            </div>
        </div>
    </div>

</div>



<input id="add_product" name="add_product" value="1" style="visibility:hidden" />

<input id="add_description" name="add_description" value="1" style="visibility:hidden" />
<input id="add_price" name="add_price" value="1" style="visibility:hidden" />
<input id="add_price_dsco" name="add_price_dsco" value="1" style="visibility:hidden" />

@section scripts {

    <style>
        .required {
            position: absolute;
            margin-left: -10px;
            color: #FB0000;
            font-size: 15px;
        }
    </style>
    <link href="~/Content/Inspinia/Styles/steps/jquery.steps.css" rel="stylesheet" />
    <script src="~/Content/Inspinia/plugins/steps/jquery.steps.min.js"></script>

    <script>
        var _jsonProductsSelected = [];
        $(document).ready(function () {


            GetEstados();

            $("#txtCteCp").keydown(function (event) {	// Allow backspace and delete
                if (event.keyCode == 46 || event.keyCode == 8) { } else {	   // Ensure that it is a number
                    if (event.keyCode < 48 || event.keyCode > 57) { event.preventDefault(); }
                }
            });
            $('#txtCteCp').keypress(function () {
                var maxLength = $(this).val().length;
                if (maxLength >= 5) {
                    //alert('You cannot enter more than ' + maxLength + ' chars');
                    return false;
                }
            });

            $("#txtCteCp").on("input", function (e) {
                var input = $(this);
                var val = input.val();

                if (input.data("lastval") != val) {
                    input.data("lastval", val);

                    if (val.length == 5) {
                        GetCp($("#txtCteCp").val());
                    }
                    //your change action goes here
                    console.log(val);
                }

            });

            $('#txtCteCp').keyup(function (e) {
                if (e.keyCode === 13) {
                    if ($("#txtCteCp").val().length == 5) {
                        GetCp($("#txtCteCp").val());

                    } else {
                        alert("La longitud del C.P. debe de ser de 5 caracteres");
                        $("#txtCteCp").focus();
                        return false;

                    }
                }
            });


                $('#tblConsultaCte thead tr').clone(true).appendTo('#tblConsultaCte thead');
                $('#tblConsultaCte thead tr:eq(0) th').each(function (i) {
                    var title = $(this).text();
                    $(this).html('<input type="text" placeholder="Search ' + title + '" />');

                    $('input', this).on('keyup change', function () {
                        if (table.column(i).search() !== this.value) {
                            table
                                .column(i)
                                .search(this.value)
                                .draw();
                        }
                    });
                });

                var table = $("#tblConsultaCte").DataTable(
                    {
                        dom: "<'row'<'col col-xs-6'B><'#topRightSection.col-xs-12 col-md-6 text-right' f>>" +
                            "<'row'<'col-sm-12'tr>>" +
                            "<'row'<'col-sm-12 col-md-5'i><'col-sm-12 col-md-7'lp>>",
                        processing: true,
                        searching: true,
                        ordering: true,
                        order: [[1, 'asc']],
                        filter: false,
                        info: false,
                        stateSave: false,
                        select: true,
                        select: {
                            style: 'single'
                        },
                        //Paggin
                        paging: true,
                        pageLength: 10,
                        lengthMenu: [10, 25, 50, 100, 500],

                        // destroy: true, //destruye automaticamente la referencia a la tabla
                        //Ajax
                        //serverSide: true,
                        //bServerSide: true,
                        //sServerMethod: "GET",
                        buttons: ['csv', 'excel'],
                        orderCellsTop: false,
                        fixedHeader: true

                    }
                );

                $('#tblBusquedaArt2 thead tr').clone(true).appendTo('#tblBusquedaArt2 thead');
                $('#tblBusquedaArt2 thead tr:eq(0) th').each(function (i) {
                    if ($(this).attr('name') != "accion") {
                        var title = $(this).text();
                        $(this).html('<input type="text"  placeholder="' + title + '" />');

                        $('input', this).on('keyup change', function () {
                            if (table1.column(i).search() !== this.value) {
                                table1
                                    .column(i)
                                    .search(this.value)
                                    .draw();
                            }
                        });
                    } else {
                        $(this).empty();
                    }

                    $('input', this).on('keyup change', function () {
                        if (table1.column(i).search() !== this.value) {
                            table1
                                .column(i)
                                .search(this.value)
                                .draw();
                        }
                    });
                });

                var table1 = $("#tblBusquedaArt2").DataTable(
                    {
                        dom: "<'row'<'col col-xs-6'B><'#topRightSection.col-xs-12 col-md-6 text-right' f>>" +
                            "<'row'<'col-sm-12'tr>>" +
                            "<'row'<'col-sm-12 col-md-5'i><'col-sm-12 col-md-7'lp>>",
                        processing: true,
                        ordering: true,
                        order: [[1, 'asc']],
                        filter: false,
                        info: false,
                        stateSave: false,
                        select: true,
                        select: {
                            style: 'single'
                        },
                        //Paggin
                        paging: true,
                        pageLength: 10,
                        lengthMenu: [10, 25, 50, 100, 500],

                        // destroy: true, //destruye automaticamente la referencia a la tabla
                        //Ajax
                        //serverSide: true,
                        //bServerSide: true,
                        //sServerMethod: "GET",
                        buttons: [],
                        orderCellsTop: false,
                        fixedHeader: true,
                        "scrollX": true,
                        "scrollY": true


                    }
                );






                $("#wizard").steps({
                    supressPaginationOnFocus: false,
                labels: {
                    current: "current step:",
                    pagination: "Pagination",
                    finish: "Confirmar Orden",
                    next: "Siguiente",
                    previous: "Atras"

                },
                headerTag: "h3",
                bodyTag: "section",
                transitionEffect: "slideLeft",
                autoFocus: true,
               // stepsOrientation: "vertical",
                 onStepChanging: function (event, currentIndex, newIndex)
                {
                    var ok = false;
                    //busqueda de cliente
                    if (currentIndex == 0 )
                    {
                        //alert('Index ' + currentIndex);
                        var id = $("#hddIdCliente").val();
                        //var id = 1;
                        if (id.length == 0) {
                            return false;
                        }

                        var t = Date.now();

                         $.ajax({
                            async: false,
                            type: "GET",
                            url: '@Url.Action("GetDias", "CallCenter")',
                            data: {
                                fechaOriginal: t
                            },
                            datatype: "html",
                            success: function (json) {
                            debugger;
                                if (json.Success)
                                {
                                    var sel = $("#ddlDias");
                                    sel.empty();

                                    for (var i = 0; i < json.json.length; i++) {
                                        sel.append('<option value="' + json.json[i].fecha + '">' + json.json[i].NombeDia + '</option>');
                                    }

                                    var sel2 = $("#ddlHoras");
                                    sel2.empty();

                                    for (var i = 0; i < json.horas.length; i++) {
                                        sel2.append('<option value="' + json.horas[i].fecha + '">' + json.horas[i].NombeDia + '</option>');
                                    }

                                    ok = true;
                            }
                        }
                        , error: function (jqXHR, textStatus, errorThrown) {
                             bootbox.alert(errorThrown);

                        }
                         });

                        return ok;
                    }
                    //AVANZA / REGRESA FECHA DE ENTREGAS
                    if (currentIndex == 1) {
                        return true;
                    }

                    //REGRESA A FECHA DE ENTREGAS
                    if (currentIndex == 2 && newIndex==1) {
                        return true;
                    }
                    //AVANZA METODO DE ENTREGA
                    if (currentIndex == 2 && newIndex == 3) {
                        GetDirCteIdNumCte();
                        return true;
                    }

                    //REGRESA  CARRITO DE COMPRAS
                    if (currentIndex == 3 && newIndex == 2) {
                        return true;
                    }
                    //AVANZA A REGRESA A Metodo de entrega
                    if (currentIndex == 3 && newIndex == 4) {

                        var op = $("input:radio[name=rdoMetodoEntrega]:checked").val();

                        if (op == null) {
                            alert("Debe de seleccionar un metodo de entrega");
                            return false;
                        }

                        //EN TIENDA
                        if (op == "1") {
                           //limpiamos todos los valores de direccion de entrega
                            $("#hddIdDir").val('');
                            $("#rec_name").val('');
                            $("#rec_ciudad").val('');
                            $("#rec_estado").val('');
                            $("#rec_calle").val('');
                            $("#rec_num").val('');
                            $("#rec_nunInt").val('');
                            $("#rec_col").val('');
                            $("#rec_CP").val('');
                            return true;
                        }
                        //DOMICILIO
                        if (op == "2") {

                            //$("#hddIdDir").val('');
                            if ($("#rec_name").val().length == 0) {
                                //$("[required]").after("<span class='required'>*</span>");
                                $("#rec_name").focus();
                                return false;
                            }

                            if ($("#rec_ciudad").val().length == 0) {
                                //$("[required]").after("<span class='required'>*</span>");
                                $("#rec_ciudad").focus();
                                return false;
                            }
                            if ($("#rec_estado").val().length == 0) {
                                //$("[required]").after("<span class='required'>*</span>");
                                $("#rec_estado").focus();
                                return false;
                            } if ($("#rec_calle").val().length == 0) {
                                //$("[required]").after("<span class='required'>*</span>");
                                $("#rec_calle").focus();
                                return false;
                            } if ($("#rec_num").val().length == 0) {
                                //$("[required]").after("<span class='required'>*</span>");
                                $("#rec_num").focus();
                                return false;
                            } if ($("#rec_col").val().length == 0) {
                                //$("[required]").after("<span class='required'>*</span>");
                                $("#rec_col").focus();
                                return false;
                            }
                            if ($("#rec_CP").val().length == 0) {
                                //$("[required]").after("<span class='required'>*</span>");
                                $("#rec_CP").focus();
                                return false;
                            }



                            return true;
                        }

                        return true;
                    }

                    //REGRESA A FORMA DE PAGO
                    if (currentIndex == 4 && newIndex == 3) {
                        return true;
                    }

                    //AVANZO A RESUMEN
                    if (currentIndex == 4 && newIndex == 5) {
                        var op = $("input:radio[name=rdoMetodoPago]:checked").val();
                        if (op == "efectivo") {
                            if ($("#in_pago").val().length == 0 && $("#in_vales").val()) {
                                alert("Debe ingresar una canitdad en Efecivo o Vales");
                                return false;
                            }

                        }

                        return true;
                    }



                    }
                ,onFinished: function (event, currentIndex) {
                    alert('ya acabe');
                }
            });

            $("[name=btn]").click(function () {
                alert('click')
                $(this).parents("tr").remove();
            });



        });

        function cargaTdas() {

            if ($('#txtCp').val() == "") {
                $('#txtCp').focus();
                return;
            }
            $.ajax({
                        "url": "@Url.Action("TiendasCP", "CallCenter")",
                        "type": "get",
                        "data": { "cp": document.getElementById("txtCp").value },

                        "dataType": "json",
                        "success": function (data) {
                            var options = "";
                            $.each(data, function (index, value) {
                                options += '<option value="' + value.id + '">' + value.nombre + '</option>';
                            });
                            $("#cmbTda").html(options);

                            $("#cmbTda option[value=" + 0 + "]").attr("selected", true);
                            //$('#csdc_tipoequipo option:not(:selected)').attr('disabled', true);
                        }
                    });


        }

        function CargaSeleccionaProducto() {
            $("#dlgBuscador").modal("hide");
            if ($('#txtProdArt2').val() == "") {
                $('#txtProdArt2').focus();
                return;
            }
            //$("#exampleModal").modal("show");
            //imgProduct
            //document.getElementById("imgProduct").src = "https://edge.disstg.commercecloud.salesforce.com/dw/image/v2/BGBD_STG/on/demandware.static/-/Sites-soriana-grocery-master-catalog/default/dw4f7cd627/images/product/7501022133286-A.jpg";

            //$('#tblBusquedaArt2 > tbody').empty();
            //document.getElementById("Addcantidad").value = "";
            //tblBusquedaArt
            $.ajax({
                        "url": "@Url.Action("GetProduct", "CallCenter")",
                        "type": "get",
                        "data": { "product": document.getElementById("txtProdArt2").value },

                        "dataType": "json",
                        "success": function (data) {
                            var myTable = $('#tblBusquedaSeleccionar').DataTable();
                            var nCant = 0;
                            myTable
                                .clear()
                                .draw();
                            for (var i = 0; i < data.data.length; i++) {


                                myTable.row.add([

                                    data.data[i].Barcode,
                                    data.data[i].Description,
                                    data.data[i].Company,
                                    data.data[i].Price,
                                    data.data[i].Price,
                                    data.data[i].PromotionalPrice,
                                    "<img width='100' height='100' id=\"imgProduct2\" src=\"" + data.data[i].UrlImage + "\" class=\"img-lg\">",
                                    "<input type='number' id='nCant-" + data.data[i].Barcode + "' value='" + nCant + "' class='form-control input-sm' " + "" + " />",
                                    "<button title='Agregar Producto' onclick='addProduct3(\"" + data.data[i].Description + "\", \"" + data.data[i].Barcode + "\", \"" + + data.data[i].Price + "\")' type='button' class='btn btn-white btn-circle'> <i class='fa fa-check'></i></button>"
                                    //"<button title='Agregar Producto' onclick='addProduct3(" + '$("nCant-' + data.data[i].Barcode + "\"))' type='button' class='btn btn-white btn-circle'> <i class='fa fa-check'></i></button>"
                                ]).draw();
                            }

                            //$("#popUpSeleccionarProductos").modal("show");

                            //$.each(data.data, function (index, value) {
                            //    $('#feedback').append("<tr><td>" + value.Barcode + "</td>"
                            //        + "<td>" + value.Description + "</td>"
                            //        + "<td>" + value.Company + "</td>"
                            //        + "<td>" + value.Price + "</td>"
                            //        + "<td>" + value.Price + "</td>"
                            //        + "<td>" + value.PromotionalPrice + "</td><td>"
                            //        + "<div class=\"col-xs-2 col-md-2 col-lg-2\">"
                            //        + "<img width='100' height='100' id=\"imgProduct2\" src=\" " + value.UrlImage + " \" class=\"img - lg\">"
                            //        + "</div>"
                            //        + "</td>"
                            //        + "<td>" + value.Price + "</td>"
                            //        + "<td>" + value.Price + "</td>"
                            //        + "</tr>");
                            //    document.getElementById("imgProduct2").src = value.UrlImage;
                            //});

                            //document.getElementById("add_product").value = data.data.Barcode;
                            //document.getElementById("add_description").value = data.data.Description;
                            //document.getElementById("add_price").value = data.data.Price;
                            //document.getElementById("add_price_dsco").value = data.data.PromotionalPrice;


                        }
                    });
        }


        function CargaProducto() {
            $("#dlgBuscador").modal("hide");
            if ($('#txtProdArt').val() == "") {
                $('#txtProdArt').focus();
                return;
            }
            //$("#exampleModal").modal("show");
            //imgProduct
            //document.getElementById("imgProduct").src = "https://edge.disstg.commercecloud.salesforce.com/dw/image/v2/BGBD_STG/on/demandware.static/-/Sites-soriana-grocery-master-catalog/default/dw4f7cd627/images/product/7501022133286-A.jpg";

            //$('#tblBusquedaArt2 > tbody').empty();
            //document.getElementById("Addcantidad").value = "";
            //tblBusquedaArt
            $.ajax({
                        "url": "@Url.Action("GetProduct", "CallCenter")",
                        "type": "get",
                        "data": { "product": document.getElementById("txtProdArt").value },

                        "dataType": "json",
                        "success": function (data) {
                            var myTable = $('#tblBusquedaArt2').DataTable();
                            var nCant = 0;
                            myTable
                                .clear()
                                .draw();
                            for (var i = 0; i < data.data.length; i++) {


                                myTable.row.add([

                                    data.data[i].Barcode,
                                    data.data[i].Description,
                                    data.data[i].Company,
                                    data.data[i].Price,
                                    data.data[i].Price,
                                    data.data[i].PromotionalPrice,
                                    "<img width='100' height='100' id=\"imgProduct2\" src=\"" + data.data[i].UrlImage + "\" class=\"img-lg\">"
                                    //"<input type='number' id='nCant-" + data.data[i].Barcode + "' value='" + nCant + "' class='form-control input-sm' " + "" + " />",
                                    //"<button title='Agregar Producto' onclick='addProduct3(" + '$("nCant-' + data.data[i].Barcode + "\"))' type='button' class='btn btn-white btn-circle'> <i class='fa fa-check'></i></button>"
                                ]).draw();
                            }

                            $("#exampleModal").modal("show");

                            //$.each(data.data, function (index, value) {
                            //    $('#feedback').append("<tr><td>" + value.Barcode + "</td>"
                            //        + "<td>" + value.Description + "</td>"
                            //        + "<td>" + value.Company + "</td>"
                            //        + "<td>" + value.Price + "</td>"
                            //        + "<td>" + value.Price + "</td>"
                            //        + "<td>" + value.PromotionalPrice + "</td><td>"
                            //        + "<div class=\"col-xs-2 col-md-2 col-lg-2\">"
                            //        + "<img width='100' height='100' id=\"imgProduct2\" src=\" " + value.UrlImage + " \" class=\"img - lg\">"
                            //        + "</div>"
                            //        + "</td>"
                            //        + "<td>" + value.Price + "</td>"
                            //        + "<td>" + value.Price + "</td>"
                            //        + "</tr>");
                            //    document.getElementById("imgProduct2").src = value.UrlImage;
                            //});

                            //document.getElementById("add_product").value = data.data.Barcode;
                            //document.getElementById("add_description").value = data.data.Description;
                            //document.getElementById("add_price").value = data.data.Price;
                            //document.getElementById("add_price_dsco").value = data.data.PromotionalPrice;


                        }
                    });
        }

        function addProduct() {


            document.getElementById("txtProdArt").focus();
            document.getElementById('btnBuscar').disabled = false;
        }
        function DeleteProduct(barcode) {
            var cantidad = $("#productCant-" + barcode).val();
            var item = _jsonProductsSelected.find(x => x.barcode === barcode);

            let _index = _jsonProductsSelected.indexOf(item);
            if (_index > -1) {
                _jsonProductsSelected.splice(_index, 1);
            }

            llenarCarrito();

        }
        function Change(barcode) {
            var cantidad = $("#productCant-" + barcode).val();
            var item = _jsonProductsSelected.find(x => x.barcode === barcode);

            let _obj = {};
            _obj.barcode = item.barcode;
            _obj.description = item.description;
            _obj.price = item.price;
            _obj.quantity = cantidad;
            _obj.total = cantidad * item.price;


            let _index = _jsonProductsSelected.indexOf(item);
            if (_index > -1) {
                _jsonProductsSelected.splice(_index, 1);
            }

                _jsonProductsSelected.push(_obj);

                llenarCarrito();

        }
        function addProduct3(descripcion, barcode, precio) {
            //alert('Producto Añadido ' + descripcion + "----" + barcode + "----" + precio);

            var cantidad = $("#nCant-" + barcode).val();
            if (cantidad == 0) {
                alert("La Cantidad debe ser Mayor a 0.")
            }
            else {
                let _obj = {};
                _obj.barcode = barcode;
                _obj.description = descripcion;
                _obj.price = precio;
                _obj.quantity = cantidad;
                _obj.total = cantidad * precio;

                _jsonProductsSelected.push(_obj);

                llenarCarrito();

            }
        }

        function llenarCarrito() {
            var cant = 0, tot = 0.0;
            $("#tblPoductosSeleccionados tbody").remove();

            $("#tblPoductosSeleccionados tr").remove();
            trTh = $('<tr/>');
            trTh.append("<th class='text-center sorting' tabindex='0' rowspan='1' colspan='1'>Descripción</th>");
            trTh.append("<th class='text-center sorting' tabindex='0' rowspan='1' colspan='1' style='width: 10 %;'>Precio Normal</th>");
            trTh.append("<th class='text-center sorting' tabindex='0' rowspan='1' colspan='1' style='width: 10 %;'>Precio Oferta</th>");
            trTh.append("<th class='text-center sorting' tabindex='0' rowspan='1' colspan='1' style='width: 20 %;'>Cantidad</th>");
            trTh.append("<th class='text-center sorting' tabindex='0' rowspan='1' colspan='1' style='width: 15 %;'>Total</th>");
            trTh.append("<th class='text-center sorting' tabindex='0' rowspan='1' colspan='1' style='width: 10 %;'>Borrar</th>");
            $('#tblPoductosSeleccionados').append(trTh);
            for (var i = 0; i < _jsonProductsSelected.length; i++) {
                tr = $('<tr/>');
                //tr.append("<td class='row1'>" + json.json[i].Id_Num_Orden + "</td>");
                tr.append("<td>" + _jsonProductsSelected[i].description + "</td>");
                tr.append("<td>" + "$" + _jsonProductsSelected[i].price + "</td>");
                tr.append("<td>" + "$" + _jsonProductsSelected[i].price + "</td>");
                tr.append("<td>" +
                    "<input type='number' onchange='Change(\"" + _jsonProductsSelected[i].barcode + "\")' id='productCant-" + _jsonProductsSelected[i].barcode + "' value='" + _jsonProductsSelected[i].quantity + "' class='form-control input-sm' " + "" + " /> "
                    + "</td>");
                tr.append("<td>" + "$" + _jsonProductsSelected[i].total + "</td>");
                tr.append("<td><button type='button'  onclick='DeleteProduct(\"" + _jsonProductsSelected[i].barcode + "\")'  class='btn btn-warning btn-circle'> <i class='fa fa-minus'></i></button></td>");
                $('#tblPoductosSeleccionados').append(tr);

                cant = cant + parseInt(_jsonProductsSelected[i].quantity);
                tot = tot + parseFloat(_jsonProductsSelected[i].total);
            }
            $("#lblCantidad").empty();
            $("#lblCantidad").append("Articulos Totales: " + cant);
            $("#lblTotal").empty();
            $("#lblTotal").append("Total a Pagar: $" + tot);
        }

        function seleccionarProducto() {
            $("#dlgSeleccionar").modal("show");
        }
        function addProduct2() {

            $('#feedback2').append("<tr id=\"" + document.getElementById("add_product").value +"\"> <td>" + document.getElementById("add_description").value + "<br /><input type=\"text\" placeholder=\"Indicaciones y Observaciones\" class=\"form-control input-sm\"/>" + "</td>"
                + "<td>" + document.getElementById("add_price").value + "</td>"
                + "<td>" + document.getElementById("add_price_dsco").value + "</td>"
                + "<td>" + document.getElementById("Addcantidad").value + "</td>"
                + "<td>" + document.getElementById("Addcantidad").value + "</td>"
                + "<td>" + "<button type=\"button\" id=\"btn\" name=\"btn\" class=\"btn btn-primary\" onclick=\"eliminar(" + document.getElementById("add_product").value+") \">Eliminar</button>" + "</td></tr>");

            //onclick=\"eliminar(" + document.getElementById("add_product")+")

           /* $("#exampleModal").modal("hidde");*/
        }

        function eliminar(p) {
            var ba = "#" + p;

            $(ba).remove();

            //$(this).parents("tr").remove();

        }


        function BuscarCliente() {
            //$('#divVerificaCliente').hide();
            //$('#divBuscaCliente').hide();
            //$('#divResultClient').show();
            $('#divbuttonAddClient').hide();
            $('#divgridClientes').hide();

            var parm = $('#txtBuscarCte').val();

            if (parm == 'Juan Perez')
                $('#divgridClientes').show();
            else
                $('#divbuttonAddClient').show();

            @*if (parm.length == 0) {
                $('#txtBuscarCte').focus();
                return;
            }

            $.ajax({
                async: false,
                type: "GET",
                url: '@Url.Action("BuscarCliente", "CallCenter")',
                data: {
                    Criterio: parm

                },
                datatype: "html",
                success: function (json) {
                    debugger;
                    if (json.Success) {
                        if (json.existe) {

                            var myTable = $('#tblConsultaCte').DataTable();
                            myTable
                                .clear()
                                .draw();
                            for (var i = 0; i < json.resp.length; i++) {


                                myTable.row.add([

                                    json.resp[i].Nom_Cte,
                                    json.resp[i].Ap_Paterno,
                                    json.resp[i].Ap_Materno,
                                    json.resp[i].Id_Email,
                                    json.resp[i].Telefono,
                                    json.resp[i].Direccion,
                                    "<button title='Click para Seleccionar el cliente' onclick='SelCte(\"" + json.resp[i].Id_Email + "\")' type='button' class='btn btn-white btn-circle'> <i class='fa fa-check'></i></button>"

                                ]).draw();
                            }

                            $("#divMsjAddClient").hide();
                            $("#dlgListClients").modal("show");
                        }
                        else {
                            popAddClient();
                            $("#divMsjAddClient").show();
                        }
                    }
                    else {
                        alert(json.Message);
                    }
                }
                , error: function (jqXHR, textStatus, errorThrown) {
                    bootbox.alert(errorThrown);

                }
            });*@
        }


        function SelCte(mail) {
            $.ajax({
                async: false,
                type: "GET",
                url: '@Url.Action("VerificaCliente", "CallCenter")',
                data: {
                    Criterio: mail

                },
                datatype: "html",
                success: function (json) {
                    debugger;
                    if (json.Success) {
                        if (json.existe) {
                            LlenaDatosCte(json.resp);
                            $('#divVerificaCliente').hide();
                            $('#divBuscaCliente').hide();
                            $('#divResultClient').show();
                            $("#dlgListClients").modal("hide");
                        }
                        else {
                            popAddClient();
                            $("#divMsjAddClient").show();
                        }
                    }
                    else {
                        alert(json.Message);
                    }
                }
                , error: function (jqXHR, textStatus, errorThrown) {
                    bootbox.alert(errorThrown);

                }
            });
        }

        function VerificaCliente() {
            //$('#divVerificaCliente').hide();
            //$('#divBuscaCliente').hide();
            //$('#divResultClient').show();



            var parm = $('#txtVerificaC').val();
            if (parm.length == 0) {
                $('#txtVerificaC').focus();
                return;
            }
        $.ajax({
                async: false,
                type: "GET",
                url: '@Url.Action("VerificaCliente", "CallCenter")',
                data: {
                    Criterio: parm

                },
                datatype: "html",
                success: function (json) {
                    debugger;
                    if (json.Success) {
                        if (json.existe) {
                            LlenaDatosCte(json.resp);
                            $('#divVerificaCliente').hide();
                            $('#divBuscaCliente').hide();
                            $('#divResultClient').show();
                        }
                        else {
                            popAddClient();
                            $("#divMsjAddClient").show();
                        }
                    }
                    else {
                        alert(json.Message);
                    }
                }
                , error: function (jqXHR, textStatus, errorThrown) {
                    bootbox.alert(errorThrown);

                }
            });
        }

        function NuevaBusqueda() {

            $('#txtVerificaC').val('');
            $('#divVerificaCliente').show();
            $('#divBuscaCliente').show();
            $('#divResultClient').hide();
            $('#txtVerificaC').focus();
        }

        function popAddClient() {


            $("#txtCteNombre").val();
            $("#txtCteApPaterno").val();
            $("#txtCteApMaterno").val();
            $("#txtCteCalle").val();
            $("#txtCteNomDir").val();
            $("#txtCteNumExt").val();
            $("#txtCteNumInt").val();
            $("#txtCteCiudad").val();
            $("#txtCteCp").val();
            $("#ddlCteColonia").val("0");
            $("#txtCteTelefono").val();
            $("#txtCteEamil").val();
            $("#ddlCteEstado").val("0");


            $("#divMsjAddClient").hide();
            $("#txtCteEamil").focus();
            $('#ddlCteEstado').val('0');
            $("#dlgAddClients").modal("show");
            $("#txtCteEamil").focus();
        }

        function popBuscador() {
            $("#dlgBuscador").modal("show");
        }

        function popBuscarClient() {
            $("#dlgBuscadorCliente").modal("show");
        }

        function AddClient() {
            //alert("addclient");
            var Nom_Cte = $("#txtCteNombre").val();
            var Ap_Paterno = $("#txtCteApPaterno").val();
            var Ap_Materno = $("#txtCteApMaterno").val();
            var Calle = $("#txtCteCalle").val();
            var Nom_DirCTe = $("#txtCteNomDir").val();
            var Num_Ext = $("#txtCteNumExt").val();
            var Num_Int = $("#txtCteNumInt").val();
            var Ciudad = $("#txtCteCiudad").val();
            var Cod_Postal = $("#txtCteCp").val();
            var Colonia = $("#ddlCteColonia").val();
            var Telefono = $("#txtCteTelefono").val();
            var Id_Email = $("#txtCteEamil").val();
            var Ids_Num_Edo = $("#ddlCteEstado").val();

            if (Nom_Cte.length == 0) {
                $("#txtCteNombre").focus();
                return;
            }
            if (Ap_Paterno.length == 0) {
                $("#Ap_Paterno").focus();
                return;
            }
            if (Ap_Materno.length == 0) {
                $("#txtCteApMaterno").focus();
                return;
            }
            if (Calle.length == 0) {
                $("#txtCteCalle").focus();
                return;
            }
            if (Nom_DirCTe.length == 0) {
                $("#txtCteNomDir").focus();
                return;
            }
            if (Num_Ext.length == 0) {
                $("#txtCteNumExt").focus();
                return;
            }
            if (Ciudad.length == 0) {
                $("#txtCteCiudad").focus();
                return;
            }
            if (Cod_Postal.length == 0) {
                $("#txtCteCp").focus();
                return;
            }
            if (Colonia == 0) {
                $("#ddlCteColonia").focus();
                return;
            }
            if (Telefono.length == 0) {
                $("#txtCteTelefono").focus();
                return;
            }
            if (Id_Email.length == 0) {
                $("#txtCteEamil").focus();
                return;
            }
            if (Ids_Num_Edo == "0") {
                $("#ddlCteEstado").focus();
                return;
            }

            //alert("va a guardar");
              $.ajax({
                async: false,
                type: "GET",
                url: '@Url.Action("AddClient", "CallCenter")',
                data: {
                    Nom_Cte: Nom_Cte,
                    Ap_Materno: Ap_Materno,
                    Ap_Paterno: Ap_Paterno,
                    Calle: Calle,
                    Nom_DirCTe: Nom_DirCTe,
                    Num_Ext: Num_Ext,
                    Num_Int: Num_Int,
                    Ciudad: Ciudad,
                    Cod_Postal: Cod_Postal,
                    Colonia: Colonia,
                    Telefono: Telefono,
                    Id_Email: Id_Email,
                    Ids_Num_Edo: Ids_Num_Edo
                },
                datatype: "html",
                success: function (json) {
                    debugger;
                    if (json.Success) {
                        LlenaDatosCte(json.resp);
                        $('#divVerificaCliente').hide();
                        $('#divBuscaCliente').hide();
                        $('#divResultClient').show();
                    }
                    else {
                        alert(json.Message);
                    }
                }
                , error: function (jqXHR, textStatus, errorThrown) {
                    bootbox.alert(errorThrown);

                }
            });
        }


        function LlenaDatosCte(resp) {

            debugger;
            $("#hddIdCliente").val(resp.Id_Num_Cte);
            $('#lblNombreCte').text(resp.Nom_Cte + ' ' + resp.Ap_Paterno + ' ' + resp.Ap_Materno);
            $('#lblFolioCte').text(resp.Id_Num_Cte);
            $('#lblClaveCte').text(resp.Id_Email);
            $('#lblCalleCte').text(resp.Calle + ' ' + resp.Num_Ext );
            $('#lblColoniaCte').text(resp.Colonia);
            $('#lblEdoCte').text(resp.Ciudad + ', ' + resp.Nom_Estado);
            $('#lblCpCte').text('C.P. '+ resp.Cod_Postal);
            $('#lblTelefonoCte').text(resp.Telefono);


        }

        function onchangeDias() {

            var _fechaOriginal = Date.now();
            var _fecha = $("[id='ddlDias'] option:selected").text();
            $.ajax({
                async: false,
                type: "GET",
                url: '@Url.Action("GetHorasEntrega", "CallCenter")',
                data: {
                    fechaOriginal: _fechaOriginal
                    , fechaSelec:_fecha
                },
                datatype: "html",
                success: function (json) {
                debugger;
                    if (json.Success)
                    {
                        var sel = $("#ddlHoras");
                        sel.empty();

                        for (var i = 0; i < json.json.length; i++) {
                            sel.append('<option value="' + json.json[i].fecha + '">' + json.json[i].NombeDia + '</option>');
                        }
                }
            }
            , error: function (jqXHR, textStatus, errorThrown) {
            bootbox.alert(errorThrown);

            }
            });
        }

        function GetDirCteIdNumCte() {
            debugger;
              var _Id_Num_Cte = $("#hddIdCliente").val();
            $.ajax({
                async: false,
                type: "GET",
                url: '@Url.Action("GetDirCteIdNumCte", "CallCenter")',
                data: {
                    Id_Num_Cte: _Id_Num_Cte

                },
                datatype: "html",
                success: function (json) {
                    debugger;
                    if (json.Success) {
                        $('#tblDirecciones tbody').empty();
                        //var tr;
                        debugger;
                        //Append each row to html table

                        for (var i = 0; i < json.resp.length; i++) {
                            tr = $('<tr/>');


                            tr.append("<td>  <b> " + json.resp[i].Nom_DirCTe + "</b > <br>" + json.resp[i].Direccion + "</td>");
                            //<button type="button" class="btn btn-default btn btn-xs" onclick="GetTdasTrasp()">
                            tr.append("<td><button onclick='SelDirCte(" + json.resp[i].Id_Cnsc_DirCTe + ")' type = 'button' class= 'btn btn-default btn btn-xs'>Utilizar esta direccón</button></td >")
                            $('#tblDirecciones').append(tr);
                        }

                    }
                    else {
                        alert(json.Message);
                    }
                }
                , error: function (jqXHR, textStatus, errorThrown) {
                   alert(errorThrown);

                }
            });
        }

        function SelDirCte(id) {
              $.ajax({
                async: false,
                type: "GET",
                url: '@Url.Action("GetDirDirCteIdDirCTe", "CallCenter")',
                data: {
                    Id_Cnsc_DirCTe: id

                },
                datatype: "html",
                success: function (json) {
                    debugger;
                    if (json.Success) {

                        $("#hddIdDir").val(json.resp.Id_Cnsc_DirCTe);
                       //$("#rec_name").val(json.resp.Id_Cnsc_DirCTe);
                        $("#rec_ciudad").val(json.resp.Ciudad);
                        $("#rec_estado").val(json.resp.Nom_Estado);
                        $("#rec_calle").val(json.resp.Calle);
                        $("#rec_num").val(json.resp.Num_Ext);
                        $("#rec_nunInt").val(json.resp.Num_Int);
                        $("#rec_col").val(json.resp.Colonia);
                        $("#rec_CP").val(json.resp.Cod_Postal);
                    }
                    else {
                        alert(json.Message);
                    }
                }
                , error: function (jqXHR, textStatus, errorThrown) {
                   alert(errorThrown);

                }
            });
        }



        function GetCp(_postalCode) {
            //alert($("#txtCodPos").val());
            //var _postalCode = $("#txtCodPos").val();

            if (_postalCode.length == 5) {
                $.ajax({
                    async: false,
                    type: "GET",
                    url: '@Url.Action("GetInfoByCP", "AltaProveedor")',
                    data: {
                        postalCode: _postalCode
                    },
                    datatype: "html",
                    success: function (json) {
                        //debugger;
                        if (json.Success) {


                            var sel = $("#ddlCteColonia");
                            sel.empty();

                            $('#ddlCteColonia').get(0).options[0] = new Option("--SELECCIONE--", "0");
                            for (var i = 0; i < json.resp.length; i++) {
                                sel.append('<option value="' + json.resp[i].SubLocality + '">' + json.resp[i].SubLocality + '</option>');
                            }

                            if (json.resp.length > 0) {
                                $("#txtCteCiudad").val(json.resp[0].Locality);
                                debugger;
                                //$("#ddlCteEstado").find("option[text=" + json.resp[0].Region1Name + "]").attr("selected", true);

                                $('#ddlCteEstado option:contains('+ json.resp[0].Region1Name +')').attr('selected', 'selected');
                            }
                        }
                        else {
                            alert(json.Message);
                        }
                    }
                    , error: function (jqXHR, textStatus, errorThrown) {
                        alert(errorThrown);

                    }

                });
            }

        }






        function GetEstados() {


                $.ajax({
                    async: false,
                    type: "GET",
                    url: '@Url.Action("GetEstados", "CallCenter")',
                    data: {

                    },
                    datatype: "html",
                    success: function (json) {
                        //debugger;
                        if (json.Success) {


                            var sel = $("#ddlCteEstado");
                            sel.empty();

                            $('#ddlCteEstado').get(0).options[0] = new Option("--SELECCIONE--", "0");
                            for (var i = 0; i < json.resp.length; i++) {
                                sel.append('<option value="' + json.resp[i].Id_Num_Estado + '">' + json.resp[i].Nom_Estado + '</option>');
                            }


                        }
                        else {
                            alert(json.Message);
                        }
                    }
                    , error: function (jqXHR, textStatus, errorThrown) {
                        alert(errorThrown);

                    }

                });


        }


    </script>

}
