@model IEnumerable<SelectListItem>
@{
    ViewBag.Title = "Manuales Operativos";
    Layout = "~/Views/Shared/_Layout.cshtml";
}


<div class="wrapper wrapper-content animated fadeInRight" style="padding-top: 0px;">
    <div class="row">
        <div class="col-xs-12 col-md-12 col-lg-12">
            <div class="ibox-content p-xl" style="padding-top: 0px;padding-bottom: 0px;">
                <div class="row">
                    <div class="col-xs-12 col-md-12 col-lg-12 text-center">
                        <h2>Manuales Operativos</h2>
                    </div>
                </div>

                <table style="width:100%;">
                    <tr>
                        <td style="text-align:left;padding-left:50px;">
                            <h2><i></i> Tipo de Almacen:</h2>
                            <div class="col-sm-10">
                                @Html.DropDownList("tipoalmacen", Model, new { @id = "TP", @class = "form-control m-b" })
                                <br />
                                <input class="form-check-input" type="checkbox" value="" id="chkSel_AP" />
                                <a id="txtAviso" name="txtAviso" onclick="popUpShowPDF(1)"
                                   title="Click para ver el aviso de privacidad" class="link"><u>Aviso Privacidad</u></a>
                                <br />

                            </div>
                        </td>
                    </tr>
                </table>

                <div class="row" style="height:490px; overflow-x:auto;">
                    <table style="width:100%;">
                        <tr>
                            @*<td style="text-align:left;padding-left:50px;">
                                    <h2><i class="fa fa-certificate"></i> Manual de Operación</h2>
                                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span> Procesos para surtir y enviar una orden</span>
                                    <button name="operacionespdf" onclick="verPDF('operaciones.pdf', this.name)" style="float: left" type="button" class="btn btn-w-m btn-warning ver-operacionespdf">Mostrar</button>
                                    <button name="operacionespdf" onclick="ocultarPDF(this.name)" style="float: left; display:none;" type="button" class="btn btn-w-m btn-warning ocultar-operacionespdf">Ocultar</button>
                                    <iframe id="operacionespdf" embedded=true width="600" height="780" style="border: none; display:none;"></iframe>
                                </td>*@
                            <td style="text-align:left;padding-left:50px;">
                                <h2><i class="fa fa-certificate"></i> Manual de Operación</h2>
                                <span> Procesos para surtir y enviar una orden</span>
                                <br />
                                <button name="operacionespdf" onclick="verPDF(1, this.name)" style="float: left" type="button" class="btn btn-w-m btn-warning ver-operacionespdf">Mostrar</button>
                                <button name="operacionespdf" onclick="ocultarPDF(this.name)" style="float: left; display:none;" type="button" class="btn btn-w-m btn-warning ocultar-operacionespdf">Ocultar</button>
                                <iframe id="operacionespdf" embedded=true width="600" height="780" style="border: none; display:none;"></iframe>
                                
                            </td>
                        </tr>
                        <tr>
                            <td style="text-align:left;padding-left:50px;">
                                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                @*<iframe id="operacionespdfVideo" embedded=true width="600" height="780" style="border: none; display:none;"></iframe>*@
                                <video id="video" class="video-js vjs-default-skin" controls
                                       preload="auto" width="300" height="480"
                                       data-setup="{}">
                                    <source id="source" type='video/mp4'>
                                </video>
                            </td>
                        </tr>

                        <tr>
                            @*<td style="text-align:left;padding-left:50px;">
                                    <h2><i class="fa fa-certificate"></i> Manual de Empaque</h2>
                                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span>Tipos de empaque que se deben utilizar para un adecuado envio</span>
                                    <button name="empaquepdf" onclick="verPDF('Empaque.pdf', this.name)" style="float: left" type="button" class="btn btn-w-m btn-warning ver-empaquepdf">Mostrar</button>
                                    <button name="empaquepdf" onclick="ocultarPDF(this.name)" style="float: left; display:none;" type="button" class="btn btn-w-m btn-warning ocultar-empaquepdf">Ocultar</button>
                                    <iframe id="empaquepdf" embedded=true width="600" height="780" style="border: none; display:none;"></iframe>

                                </td>*@
                            <td style="text-align:left;padding-left:50px;">
                                <h2><i class="fa fa-certificate"></i> Manual de Empaque</h2>
                                <span>Tipos de empaque que se deben utilizar para un adecuado envio</span>
                                <br />
                                <button name="empaquepdf" onclick="verPDF(2, this.name)" style="float: left" type="button" class="btn btn-w-m btn-warning ver-empaquepdf">Mostrar</button>
                                <button name="empaquepdf" onclick="ocultarPDF(this.name)" style="float: left; display:none;" type="button" class="btn btn-w-m btn-warning ocultar-empaquepdf">Ocultar</button>
                                <iframe id="empaquepdf" embedded=true width="600" height="780" style="border: none; display:none;"></iframe>

                            </td>
                        </tr>
                        <tr>
                            <td style="text-align:left;padding-left:50px;">
                                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                <iframe id="empaquepdfVideo" embedded=true width="600" height="780" style="border: none; display:none;"></iframe>
                            </td>
                        </tr>
                        <tr>
                            @*<td style="text-align:left;padding-left:50px;">
                                    <h2><i class="fa fa-certificate"></i> Manual de Actualización de Inventario</h2>
                                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span> Pasos a seguir para mantener actualizado tu inventario en la página</span>
                                    <button name="inventariospdf" onclick="verPDF('Inventarios.pdf', this.name)" style="float: left" type="button" class="btn btn-w-m btn-warning ver-inventariospdf">Mostrar</button>
                                    <button name="inventariospdf" onclick="ocultarPDF(this.name)" style="float: left; display:none;" type="button" class="btn btn-w-m btn-warning ocultar-inventariospdf">Ocultar</button>
                                    <iframe id="inventariospdf" embedded=true width="600" height="780" style="border: none; display:none;"></iframe>

                                </td>*@
                            <td style="text-align:left;padding-left:50px;">
                                <h2><i class="fa fa-certificate"></i> Manual de Actualización de Inventario</h2>
                                <span> Pasos a seguir para mantener actualizado tu inventario en la página</span>
                                <br />
                                <button name="inventariospdf" onclick="verPDF(3, this.name)" style="float: left" type="button" class="btn btn-w-m btn-warning ver-inventariospdf">Mostrar</button>
                                <button name="inventariospdf" onclick="ocultarPDF(this.name)" style="float: left; display:none;" type="button" class="btn btn-w-m btn-warning ocultar-inventariospdf">Ocultar</button>
                                <iframe id="inventariospdf" embedded=true width="600" height="780" style="border: none; display:none;"></iframe>

                            </td>
                        </tr>
                        <tr>
                            <td style="text-align:left;padding-left:50px;">
                                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                <iframe id="inventariospdfVideo" embedded=true width="600" height="780" style="border: none; display:none;"></iframe>
                            </td>
                        </tr>
                        <tr>
                            @*<td style="text-align:left;padding-left:50px;">
                                    <h2><i class="fa fa-certificate"></i> Manual Actualización de Contenido</h2>
                                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span> Pasos a seguir para actualizar el contenido de un producto</span>
                                    <button name="contenidospdf" onclick="verPDF('Contenidos.pdf', this.name)" style="float: left" type="button" class="btn btn-w-m btn-warning ver-contenidospdf">Mostrar</button>
                                    <button name="contenidospdf" onclick="ocultarPDF(this.name)" style="float: left; display:none;" type="button" class="btn btn-w-m btn-warning ocultar-contenidospdf">Ocultar</button>
                                    <iframe id="contenidospdf" embedded=true width="600" height="780" style="border: none; display:none;"></iframe>

                                </td>*@
                            <td style="text-align:left;padding-left:50px;">
                                <h2><i class="fa fa-certificate"></i> Manual Actualización de Contenido</h2>
                                <span> Pasos a seguir para actualizar el contenido de un producto</span>
                                <br />
                                <button name="contenidospdf" onclick="verPDF(4, this.name)" style="float: left" type="button" class="btn btn-w-m btn-warning ver-contenidospdf">Mostrar</button>
                                <button name="contenidospdf" onclick="ocultarPDF(this.name)" style="float: left; display:none;" type="button" class="btn btn-w-m btn-warning ocultar-contenidospdf">Ocultar</button>
                                <iframe id="contenidospdf" embedded=true width="600" height="780" style="border: none; display:none;"></iframe>

                            </td>
                        </tr>
                        <tr>
                            <td style="text-align:left;padding-left:50px;">
                                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                <iframe id="contenidospdfVideo" embedded=true width="600" height="780" style="border: none; display:none;"></iframe>
                            </td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>
<input id="chkAviso" name="chkAviso" value="" style="visibility:hidden" />

@section scripts {
    @*<link href="http://vjs.zencdn.net/c/video-js.css" rel="stylesheet">
    <script src="http://vjs.zencdn.net/c/video.js"></script>*@

    <link href="~/Content/video-js.css" rel="stylesheet">
    <script src="~/Content/video.js"></script>
    <script>

        $(document).ready(function () {



        });

        function popUpShowPDF(txtValor) {
            $("#chkAviso").val(txtValor);
            if ($("#chkSel_AP")[0].checked == false) {
                $("#chkSel_AP").attr("checked", true);
                $("#chkSel_AP")[0].checked = true;
            }
            var url2 = '@Url.Content("~/").ToString()' + "Files/AvisoPrivacidad.pdf";
            window.open(url2);
        }


    /*    function select() {*/




             @*$.ajax({
                async: false,
                type: "GET",
                url: '@Url.Action("llenarselect", "ManualesOperativos")',
                datatype: "html",
                success: function (json) {
                    debugger;
                    if (json.Success) {
                        alert("Inserción exitosa");
                        location.reload();
                    }
                    else {
                        alert(json.Message);
                    }
                }
                , error: function (jqXHR, textStatus, errorThrown) {
                    bootbox.alert(errorThrown);

                }
            });
        }*@

        //-----------------------------------------------------------------------
        //function verPDF(PDF,opcion) {
        //    var host = window.location.origin


        //    $("#"+ opcion).attr("src", host + "/Content/ManualesOpPDF/" + PDF)
        //    $("#"+ opcion).show()


        //    $(".ver-" + opcion).hide()
        //    $(".ocultar-" + opcion).show()


        //}
        function ocultarPDF(opcion) {

            $(".ver-" + opcion).show()
            $(".ocultar-" + opcion).hide()
            $("#" + opcion).hide()
            $("#" + opcion + "Video").hide()


        }

        //--------------------------------------------------------------



        function verPDF(idManual, opcion) {
            var tipoAlmacen = $("#TP").val();

            if ($("#chkSel_AP")[0].checked == false & $("#chkAviso").val() == "") {
                $("#chkSel_AP").focus();
                return;
            }
            else {
                $("#chkAviso").val("1");
            }

            if ($("#chkAviso").val() == "") {
                $("#chkSel_AP").focus();
                return;
            }
            else {
                $("#chkSel_AP").attr("checked", true);
            }

            if (tipoAlmacen == 0) {
                $("#TP").focus();
                return;
            }

             $.ajax({
                async: false,
                type: "GET",
                url: '@Url.Action("CargaPDF", "ManualesOperativos")',
                 data: {
                     idManual: idManual,
                     idOwner: tipoAlmacen

                },
                datatype: "html",
                success: function (json) {

                    if (json.Success) {
                        if (json.URL.includes(",")) {

                            var lstURLs = json.URL.split(",");
                            $("#" + opcion).attr("src", lstURLs[0] + "#toolbar=0")
                            $("#" + opcion).show()
                            console.log("Show PDF AND VIDEO " + lstURLs[1]);
                            //$("#" + opcion + "Video").attr("src", "https://localhost/DSV/Files/DST_Empaque_video1.mp4")
                            //$("#" + opcion + "Video").show()
                            var video = document.getElementById('video');
                            //var source = document.createElement('source');

                            //source.setAttribute('src', 'http://www.tools4movies.com/trailers/1012/Kill%20Bill%20Vol.3.mp4');

                           // video.appendChild(source);
                           // video.play();
                            var source = document.getElementById('source');

             
                            source.src = lstURLs[1];
                                video.load();
                                video.play();

                            //setTimeout(function () {
                            //    video.pause();

                            //    source.setAttribute('src', 'http://www.tools4movies.com/trailers/1012/Despicable%20Me%202.mp4');

                            //    video.load();
                            //    video.play();
                            //}, 3000);

                        }
                        else {
                            console.log("Show PDF");
                            $("#" + opcion).attr("src", json.URL + "#toolbar=0")
                            $("#" + opcion).show()
                            //$("#"+ opcion + "Video").show()
                        }
                        $(".ver-" + opcion).hide()
                        $(".ocultar-" + opcion).show()

                    }
                    else {
                        alert(json.Message);
                    }
                }
                , error: function (jqXHR, textStatus, errorThrown) {
                    alert(errorThrown);
                }
            });
        }




    </script>
}